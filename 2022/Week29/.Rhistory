legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
library(tidytuesdayR)
library(showtext)
library(tidyverse)
library(janitor)
library(patchwork)
# Set the Stage
font <- "Noto Serif"
font_add_google(family=font, font)
font_add_google("Roboto", "roboto")
showtext_auto(enable = TRUE)
theme_set(theme_minimal(base_family = font))
bg <- "#F0EBE3"
txt_col <- "black"
col <- "#0F3D3E"
col2 <- "#EF5B0C"
#read data
tt_data <- tt_load(2022, week=29)
tech <- tt_data$technology
codes <- read_csv("https://raw.githubusercontent.com/lukes/ISO-3166-Countries-with-Regional-Codes/master/all/all.csv") |>
clean_names()
#data cleaning
technology <- tech |>
left_join(
codes |> select(iso3c=alpha_3, region, sub_region)
)
df <- technology|>
filter(variable=='steel_production' & iso3c=='PAK' )|>
select(iso3c, year, label, value) |> group_by(year)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production 4966 thousands metric tons ",
color=col2,
family=font,
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.2, y = 5450, xend =2017.2 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=col2)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
annotation_color <- "#B20600"
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family=font,
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.2, y = 5450, xend =2017.2 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family=font,
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family="Roboto",
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
setwd("E:/TidyTuesday/2022/Week29")
#Save plot
ggsave("week_29.png",
units = 'in', width = 7, height = 5, dpi = 300)
#Save plot
showtext_opts(dpi = 320)
ggsave("tidytuesday_week_28.png",
height = 7,
width = 7,
dpi=320,
)
showtext_auto(FALSE)
#Save plot
showtext_opts(dpi = 320)
ggsave("week_29.png",
height = 7,
width = 7,
dpi=320,
)
showtext_auto(FALSE)
#Save plot
showtext_opts(dpi = 320)
ggsave("week_29.png",
height = 7,
width = 7,
dpi=320,
)
ggsave("week_29.png",
height = 7,
width = 10,
dpi=320,
)
showtext_auto(FALSE)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family="Roboto",
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family="Roboto",
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
family = font,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family="Roboto",
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
family = font,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family=font,
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
family = font,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
library(tidytuesdayR)
library(showtext)
library(tidyverse)
library(janitor)
library(patchwork)
# Set the Stage
font <- "Noto Serif"
font_add_google(family=font, font)
font_add_google("Roboto", "roboto")
showtext_auto(enable = TRUE)
theme_set(theme_minimal(base_family = font))
bg <- "#F0EBE3"
txt_col <- "black"
col <- "#0F3D3E"
annotation_color <- "#B20600"
#read data
tt_data <- tt_load(2022, week=29)
tech <- tt_data$technology
codes <- read_csv("https://raw.githubusercontent.com/lukes/ISO-3166-Countries-with-Regional-Codes/master/all/all.csv") |>
clean_names()
#data cleaning
technology <- tech |>
left_join(
codes |> select(iso3c=alpha_3, region, sub_region)
)
df <- technology|>
filter(variable=='steel_production' & iso3c=='PAK' )|>
select(iso3c, year, label, value) |> group_by(year)
#plot
ggplot(df, aes(x=year, y=value))+
geom_line(color=col, size=1)+
annotate("text", x=2017, y=5500,
label="Highest ever production \n4966 thousands metric tons ",
color=annotation_color,
family=font,
fontface="bold",
size=3,
hjust=0.5,
vjust=0,
lineheight=.8)+
geom_curve(
aes(x = 2017.5, y = 5450, xend =2017.1 , yend = 5000),
curvature = -0.25,
arrow = arrow(length = unit(0.015, "npc")),
color=annotation_color)+
labs(
title = "Steel Production in Pakistan",
subtitle = "Steel production in thousand metric tons, 1991-2019",
caption = "Muhammad Azhar | #TidyTuesday Week 29 | Data: data.nber.org",
y= "Steel production in thousand metric tons"
) +
coord_cartesian(clip="off") +
theme(
panel.grid = element_blank(),
axis.title.x  = element_blank(),
axis.title.y  = element_text(color=txt_col, size=10),
axis.text = element_text(color=txt_col, size=10),
axis.line = element_line(),
plot.title = element_text(size=20, color=txt_col, hjust=.5,lineheight=1,
family = font,
face="bold", margin=margin(0,0,10,0)),
plot.subtitle = element_text(size=12, family="Roboto",
color = "grey50",hjust=.5,
lineheight=1, face = "plain",
margin = margin(0,0,30,0)),
plot.caption = element_text(hjust=.5, margin=margin(20,0,0,0), size=8, color=txt_col, face="bold"),
plot.background = element_rect(color=bg, fill=bg),
plot.title.position = "panel",
plot.margin = margin(30,30,30,30),
legend.position = "bottom",
legend.title = element_text(color=txt_col),
legend.justification = "center",
legend.title.align=0.5,
)
#Save plot
showtext_opts(dpi = 320)
ggsave("week_29.png",
height = 7,
width = 10,
dpi=320,
)
showtext_auto(FALSE)
